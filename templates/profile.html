<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>

<header>
    <div class="logo">
        <a href="{{ url_for('home') }}">LOGO</a>
    </div>
    {% if show_login_button %}
    {% else %}
    <div class="auth-buttons">
        <a href="{{ url_for('spotify.clear_spotify_tokens') }}">Logout</a>
    </div>
    {% endif %}
</header>

<div class="profile-page">
    <h2>Profile Page</h2>
    <p>This is your profile page.</p>

    {% if show_login_button %}
        <!-- Кнопка для входа в Spotify -->
        <div class="d-flex justify-content-center">
            <a href="{{ url_for('spotify.login_spotify') }}" class="btn btn-primary mt-4 spotic">Login with Spotify</a>
        </div>
    {% else %}
        <!-- Показать топ треки и рекомендации -->
        <h2>Top Tracks</h2>
    <div class="track-list">
        {% for track in top_tracks %}
        <div class="track-item">
            <a href="spotify:track:{{ track.id }}" target="_blank">
                <img src="{{ track.album.images[0].url }}" alt="{{ track.name }} cover" class="track-cover">
            </a>
            <div class="track-info">
                <a href="spotify:track:{{ track.id }}" target="_blank" class="track-name">{{ track.name }}</a>
                <a href="spotify:artist:{{ track.artists[0].id }}" target="_blank" class="artist-name">{{ track.artists[0].name }}</a>
            </div>
        </div>
        {% endfor %}
    </div>

        <h2>Recommended Tracks</h2>
        <div class="track-list">
            {% for track in recommendations %}
                <div class="track-item">
            <a href="spotify:track:{{ track.id }}" target="_blank">
                <img src="{{ track.album.images[0].url }}" alt="{{ track.name }} cover" class="track-cover">
                    </a>
            <div class="track-info">
                <a href="spotify:track:{{ track.id }}" target="_blank" class="track-name">{{ track.name }}</a>
                <a href="spotify:artist:{{ track.artists[0].id }}" target="_blank" class="artist-name">{{ track.artists[0].name }}</a>
            </div>
                </div>
            {% endfor %}
        </div>

            <a href="{{ url_for('recommendations.customize_recommendations') }}" class="btn btn-primary mt-4 marg">Customize Recommendations</a>
                <form method="POST" action="/add-to-playlist">
    <button type="submit" class="btn btn-primary mt-4">Add All to Playlist</button>
</form>
    {% if premium_user %}
    <form action="{{ url_for('spotify.add_recommendations_to_queue') }}" method="post">
            <button type="submit" class="btn btn-primary mt-4">Add All Recommended Tracks to Queue</button>
        </form>
    {% else %}
            <!-- Неактивная кнопка, если пользователь без премиума -->
            <div class="alert alert-warning">
                You need Spotify Premium to add tracks to your queue.
            </div>
            <button type="button" class="btn btn-primary mt-4" disabled>Add All Recommended Tracks to Queue</button>
    {% endif %}

    {% endif %}
</div>

</body>
</html>
